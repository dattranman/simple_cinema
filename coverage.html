
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>api: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/dattranman/simple_cinema/api/api.go (0.0%)</option>
				
				<option value="file1">github.com/dattranman/simple_cinema/api/room.go (0.0%)</option>
				
				<option value="file2">github.com/dattranman/simple_cinema/api/seat.go (0.0%)</option>
				
				<option value="file3">github.com/dattranman/simple_cinema/api/system.go (0.0%)</option>
				
				<option value="file4">github.com/dattranman/simple_cinema/app/app.go (0.0%)</option>
				
				<option value="file5">github.com/dattranman/simple_cinema/app/room.go (0.0%)</option>
				
				<option value="file6">github.com/dattranman/simple_cinema/app/seat.go (27.5%)</option>
				
				<option value="file7">github.com/dattranman/simple_cinema/config/config.go (0.0%)</option>
				
				<option value="file8">github.com/dattranman/simple_cinema/docs/docs.go (0.0%)</option>
				
				<option value="file9">github.com/dattranman/simple_cinema/main.go (0.0%)</option>
				
				<option value="file10">github.com/dattranman/simple_cinema/model/request/room.go (0.0%)</option>
				
				<option value="file11">github.com/dattranman/simple_cinema/model/request/seat.go (0.0%)</option>
				
				<option value="file12">github.com/dattranman/simple_cinema/model/request/util.go (0.0%)</option>
				
				<option value="file13">github.com/dattranman/simple_cinema/model/schema/room.go (0.0%)</option>
				
				<option value="file14">github.com/dattranman/simple_cinema/model/schema/seat.go (0.0%)</option>
				
				<option value="file15">github.com/dattranman/simple_cinema/store/postgresql/postgresql.go (0.0%)</option>
				
				<option value="file16">github.com/dattranman/simple_cinema/store/postgresql/room.go (0.0%)</option>
				
				<option value="file17">github.com/dattranman/simple_cinema/store/postgresql/seat.go (0.0%)</option>
				
				<option value="file18">github.com/dattranman/simple_cinema/store/redis/redis.go (0.0%)</option>
				
				<option value="file19">github.com/dattranman/simple_cinema/store/redis/room.go (0.0%)</option>
				
				<option value="file20">github.com/dattranman/simple_cinema/util/util.go (0.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package api

import (
        "github.com/dattranman/simple_cinema/app"
        "github.com/dattranman/simple_cinema/docs"
        "github.com/gin-gonic/gin"
        swaggerfiles "github.com/swaggo/files"
        ginSwagger "github.com/swaggo/gin-swagger"
)

type Routers struct {
        Root *gin.Engine

        Api *gin.RouterGroup
}

type API struct {
        App         *app.App
        BaseRouters *Routers

        RoomRouter *gin.RouterGroup
}

func Init(app *app.App, router *gin.Engine) *API <span class="cov0" title="0">{
        api := &amp;API{
                App: app,
                BaseRouters: &amp;Routers{
                        Root: router,
                },
        }

        docs.SwaggerInfo.BasePath = "/"
        api.BaseRouters.Root.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerfiles.Handler))
        api.BaseRouters.Api = api.BaseRouters.Root.Group("/api/:version")
        api.RoomRouter = api.BaseRouters.Api.Group("/rooms")
        api.HealthCheck()
        api.InitRoom()
        api.InitSeat()
        return api
}</span>

func (a *API) Run() error <span class="cov0" title="0">{
        err := a.BaseRouters.Root.Run(a.App.Config.ServiceSettings.Port)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file1" style="display: none">package api

import (
        "net/http"

        "github.com/dattranman/simple_cinema/model/request"
        "github.com/dattranman/simple_cinema/model/response"
        "github.com/gin-gonic/gin"
)

func (api *API) InitRoom() <span class="cov0" title="0">{
        api.RoomRouter.GET("", api.GetRooms)
        api.RoomRouter.GET("/:id", api.GetRoomDetail)
        api.RoomRouter.POST("", api.CreateRoom)
}</span>

// GetRooms get all rooms
// @Summary Get all rooms
// @Description Get all rooms
// @Accept json
// @Produce json
// @Success 200 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms [get]
func (api *API) GetRooms(c *gin.Context) <span class="cov0" title="0">{
        rooms, err := api.App.GetRoomList()
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        }</span>

        <span class="cov0" title="0">c.JSON(http.StatusOK, rooms)</span>
}

// GetRoomDetail get room detail
// @Summary Get room detail
// @Description Get room detail
// @Accept json
// @Produce json
// @Param id path int true "Room ID"
// @Success 200 {object} response.Base
// @Failure 400 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms/{id} [get]
func (api *API) GetRoomDetail(c *gin.Context) <span class="cov0" title="0">{
        var req request.GetRoomDetail
        err := req.Bind(c)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusBadRequest, response.Base{
                        Code:    http.StatusBadRequest,
                        Message: err.Error(),
                })
        }</span>
        <span class="cov0" title="0">resp, err := api.App.GetRoomDetail(req.ID)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, response.Base{
                        Code:    http.StatusInternalServerError,
                        Message: err.Error(),
                })
        }</span>

        <span class="cov0" title="0">c.JSON(http.StatusOK, resp)</span>
}

// CreateRoom create room
// @Summary Create room
// @Description Create room
// @Accept json
// @Produce json
// @Param room body request.CreateRoom true "Room"
// @Success 200 {object} response.Base
// @Failure 400 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms [post]
func (api *API) CreateRoom(c *gin.Context) <span class="cov0" title="0">{
        var req request.CreateRoom
        if err := c.ShouldBindJSON(&amp;req); err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusBadRequest, response.Base{
                        Code:    http.StatusBadRequest,
                        Message: err.Error(),
                })
        }</span>

        <span class="cov0" title="0">room, err := api.App.CreateRoom(req)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, response.Base{
                        Code:    http.StatusInternalServerError,
                        Message: err.Error(),
                })
        }</span>

        <span class="cov0" title="0">c.JSON(http.StatusOK, room)</span>
}
</pre>
		
		<pre class="file" id="file2" style="display: none">package api

import (
        "net/http"

        "github.com/dattranman/simple_cinema/model/request"
        "github.com/dattranman/simple_cinema/model/response"
        "github.com/gin-gonic/gin"
)

func (api *API) InitSeat() <span class="cov0" title="0">{
        api.RoomRouter.POST("/:id/seats", api.BookingSeat)
        api.RoomRouter.GET("/:id/available-seats", api.GetAvailableSeats)
        api.RoomRouter.DELETE("/:id/seats", api.CancelSeat)
}</span>

// BookingSeat booking seat
// @Summary Booking seat
// @Description Booking seat
// @Accept json
// @Produce json
// @Param id path string true "Room ID"
// @Param seats body request.BookingSeats true "Seats"
// @Success 200 {object} response.BookingSeats
// @Failure 400 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms/{id}/seats [post]
func (api *API) BookingSeat(c *gin.Context) <span class="cov0" title="0">{
        req := &amp;request.BookingSeats{}
        err := req.Bind(c)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusBadRequest, response.Base{
                        Code:    response.CodeValidationError,
                        Message: err.Error(),
                })
                return
        }</span>

        <span class="cov0" title="0">resp, err := api.App.BookingSeat(req)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, response.Base{
                        Code:    response.CodeError,
                        Message: err.Error(),
                })
                return
        }</span>

        <span class="cov0" title="0">c.JSON(http.StatusOK, resp)</span>
}

// GetAvailableSeats get available seats
// @Summary Get available seats
// @Description Get available seats
// @Accept json
// @Produce json
// @Param id path string true "Room ID"
// @Success 200 {object} response.GetAvailableSeats
// @Failure 400 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms/{id}/available-seats [get]
func (api *API) GetAvailableSeats(c *gin.Context) <span class="cov0" title="0">{
        req := &amp;request.GetAvailableSeats{}
        err := req.Bind(c)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusBadRequest, response.Base{
                        Code:    response.CodeValidationError,
                        Message: err.Error(),
                })
                return
        }</span>

        <span class="cov0" title="0">resp, err := api.App.GetAvailableSeats(req)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, response.Base{
                        Code:    response.CodeError,
                        Message: err.Error(),
                })
                return
        }</span>

        <span class="cov0" title="0">c.JSON(http.StatusOK, resp)</span>
}

// CancelSeat cancel seat
// @Summary Cancel seat
// @Description Cancel seat
// @Param id path string true "Room ID"
// @Param seats body request.DeleteSeat true "Seats"
// @Success 200 {object} response.Base
// @Failure 400 {object} response.Base
// @Failure 500 {object} response.Base
// @Router /api/v1/rooms/{id}/seats [delete]
func (api *API) CancelSeat(c *gin.Context) <span class="cov0" title="0">{
        req := &amp;request.DeleteSeat{}
        err := req.Bind(c)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusBadRequest, response.Base{
                        Code:    response.CodeValidationError,
                        Message: err.Error(),
                })
                return
        }</span>

        <span class="cov0" title="0">resp, err := api.App.CancelSeat(req)
        if err != nil </span><span class="cov0" title="0">{
                c.JSON(http.StatusInternalServerError, response.Base{
                        Code:    response.CodeError,
                        Message: err.Error(),
                })
                return
        }</span>
        <span class="cov0" title="0">c.JSON(http.StatusOK, resp)</span>
}
</pre>
		
		<pre class="file" id="file3" style="display: none">package api

import (
        "net/http"

        "github.com/gin-gonic/gin"
)

func (api *API) HealthCheck() <span class="cov0" title="0">{
        api.BaseRouters.Root.GET("", api.healthCheck)
}</span>

// @BasePath /api/:version

// HealthCheck godoc
// @Summary check health
// @Schemes
// @Description check health
// @Accept json
// @Produce json
// @Success 200 {string} start at port :port
// @Router / [get]
func (api *API) healthCheck(c *gin.Context) <span class="cov0" title="0">{
        c.JSON(http.StatusOK, "start at port "+api.App.Config.ServiceSettings.Port)

}</span>
</pre>
		
		<pre class="file" id="file4" style="display: none">package app

import (
        "github.com/dattranman/simple_cinema/config"
        "github.com/dattranman/simple_cinema/model"
        "github.com/dattranman/simple_cinema/store/postgresql"
        "github.com/dattranman/simple_cinema/store/redis"
        "github.com/rs/zerolog/log"
)

type App struct {
        Config *model.Configuration

        Store *postgresql.PostgresStore
        Cache *redis.RedisCache
}

func New(cfg string) (*App, error) <span class="cov0" title="0">{
        c, err := config.Load(cfg)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">app := &amp;App{
                Config: c,
        }

        log.Info().Msg("Server is initializing...")
        app.Store = postgresql.NewPostgres(app.Config.SQLSettings)
        app.Cache = redis.NewRedis(app.Config.CacheSettings)

        return app, nil</span>
}
</pre>
		
		<pre class="file" id="file5" style="display: none">package app

import (
        "net/http"

        "github.com/dattranman/simple_cinema/model/request"
        "github.com/dattranman/simple_cinema/model/response"
        "github.com/dattranman/simple_cinema/model/schema"
)

func (a *App) GetRoomList() (resp *response.GetRoomList, err error) <span class="cov0" title="0">{
        rooms, _, err := a.Store.Room().GetList()
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">roomsResponse := make([]*response.Room, len(rooms))
        for i, room := range rooms </span><span class="cov0" title="0">{
                roomsResponse[i] = room.ToResponse()
        }</span>
        <span class="cov0" title="0">resp = &amp;response.GetRoomList{
                Base: response.Base{
                        Code:    http.StatusOK,
                        Message: "Success",
                },
                Data:  roomsResponse,
                Total: len(rooms),
        }
        return resp, nil</span>
}

func (a *App) GetRoomDetail(id int) (resp *response.GetRoomDetail, err error) <span class="cov0" title="0">{
        room, err := a.Store.Room().GetByID(id)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">resp = &amp;response.GetRoomDetail{
                Base: response.Base{
                        Code:    http.StatusOK,
                        Message: "Success",
                },
                Data: room.ToResponse(),
        }
        return resp, nil</span>
}

func (a *App) CreateRoom(req request.CreateRoom) (resp *response.CreateRoom, err error) <span class="cov0" title="0">{
        room := &amp;schema.Room{
                Row:         int(req.Row),
                Column:      int(req.Column),
                MinDistance: int(req.MinDistance),
        }
        err = a.Store.Room().Create(room)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">resp = &amp;response.CreateRoom{
                Base: response.Base{
                        Code:    http.StatusOK,
                        Message: "Success",
                },
                Data: room.ToResponse(),
        }
        return resp, nil</span>
}
</pre>
		
		<pre class="file" id="file6" style="display: none">package app

import (
        "fmt"
        "math"

        "github.com/dattranman/simple_cinema/model/request"
        "github.com/dattranman/simple_cinema/model/response"
        "github.com/dattranman/simple_cinema/model/schema"
)

type Seat struct {
        Row    int `json:"row"`
        Column int `json:"column"`
}

func CalculateDistanceTwoSeat(seat1, seat2 schema.Seat) int <span class="cov8" title="1">{
        result := int(math.Abs(float64(seat1.Row-seat2.Row)) + math.Abs(float64(seat1.Column-seat2.Column)))
        return result
}</span>

func CalculateMinDistanceFromTwoGroupSeat(group1, group2 []*schema.Seat) int <span class="cov8" title="1">{
        minDistance := math.MaxInt
        for _, seat1 := range group1 </span><span class="cov8" title="1">{
                for _, seat2 := range group2 </span><span class="cov8" title="1">{
                        distance := CalculateDistanceTwoSeat(*seat1, *seat2)
                        if distance &lt; minDistance </span><span class="cov8" title="1">{
                                minDistance = distance
                        }</span>
                }
        }
        <span class="cov8" title="1">return minDistance</span>
}

func GetAvailableSeat(bookedSeat []*schema.Seat, room *schema.Room) []*schema.Seat <span class="cov8" title="1">{
        availableSeat := []*schema.Seat{}
        for row := 0; row &lt; room.Row; row++ </span><span class="cov8" title="1">{
                for col := 0; col &lt; room.Column; col++ </span><span class="cov8" title="1">{
                        seat := schema.Seat{Row: row, Column: col}
                        if !contains(bookedSeat, seat) &amp;&amp; isSafeForBooking(seat, bookedSeat, room.MinDistance) </span><span class="cov8" title="1">{
                                availableSeat = append(availableSeat, &amp;seat)
                        }</span>
                }
        }
        <span class="cov8" title="1">return availableSeat</span>
}

func GetAvailableSeatOptimized(bookedSeat []*schema.Seat, room *schema.Room) (availableSeats []*schema.Seat) <span class="cov0" title="0">{
        const formatKeySeat = "%d-%d"
        mapSeatCannotBeUsed := make(map[string]bool)
        for _, seat := range bookedSeat </span><span class="cov0" title="0">{
                mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, seat.Row, seat.Column)] = true
                for i := 1; i &lt;= room.MinDistance; i++ </span><span class="cov0" title="0">{
                        if seat.Row+i &lt; room.Row </span><span class="cov0" title="0">{
                                mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, seat.Row+i, seat.Column)] = true
                        }</span>
                        <span class="cov0" title="0">if seat.Row-i &gt;= 0 </span><span class="cov0" title="0">{
                                mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, seat.Row-i, seat.Column)] = true
                        }</span>
                        <span class="cov0" title="0">if seat.Column+i &lt; room.Column </span><span class="cov0" title="0">{
                                mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, seat.Row, seat.Column+i)] = true
                        }</span>
                        <span class="cov0" title="0">if seat.Column-i &gt;= 0 </span><span class="cov0" title="0">{
                                mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, seat.Row, seat.Column-i)] = true
                        }</span>
                }
        }
        <span class="cov0" title="0">for row := 0; row &lt; room.Row; row++ </span><span class="cov0" title="0">{
                for col := 0; col &lt; room.Column; col++ </span><span class="cov0" title="0">{
                        if mapSeatCannotBeUsed[fmt.Sprintf(formatKeySeat, row, col)] </span><span class="cov0" title="0">{
                                continue</span>
                        }
                        <span class="cov0" title="0">availableSeats = append(availableSeats, &amp;schema.Seat{Row: row, Column: col})</span>
                }
        }
        <span class="cov0" title="0">return availableSeats</span>
}

func isSafeForBooking(seat schema.Seat, bookedSeats []*schema.Seat, minDistance int) bool <span class="cov8" title="1">{
        for _, bookedSeat := range bookedSeats </span><span class="cov8" title="1">{
                distance := CalculateDistanceTwoSeat(seat, *bookedSeat)
                if distance &gt; minDistance </span><span class="cov8" title="1">{
                        return true
                }</span>
        }
        <span class="cov8" title="1">return false</span>
}

func contains(seats []*schema.Seat, seat schema.Seat) bool <span class="cov8" title="1">{
        for _, s := range seats </span><span class="cov8" title="1">{
                if s.Row == seat.Row &amp;&amp; s.Column == seat.Column </span><span class="cov8" title="1">{
                        return true
                }</span>
        }
        <span class="cov8" title="1">return false</span>
}

func (app *App) BookingSeat(req *request.BookingSeats) (resp *response.BookingSeats, err error) <span class="cov0" title="0">{
        room, err := app.Store.Room().GetByID(req.RoomID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">bookedSeat, err := app.Store.Seat().GetByRoomID(room.ID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">for _, seat := range req.Seats </span><span class="cov0" title="0">{
                if int(seat.Row) &gt;= room.Row || int(seat.Column) &gt;= room.Column </span><span class="cov0" title="0">{
                        resp = &amp;response.BookingSeats{
                                Base: response.Base{
                                        Message: "Seat is out of range",
                                        Code:    response.CodeError,
                                },
                        }
                        return resp, nil
                }</span>
                <span class="cov0" title="0">if contains(bookedSeat, schema.Seat{Row: int(seat.Row), Column: int(seat.Column)}) </span><span class="cov0" title="0">{
                        resp = &amp;response.BookingSeats{
                                Base: response.Base{
                                        Message: "Seat is already booked",
                                        Code:    response.CodeError,
                                },
                        }
                        return resp, nil
                }</span>
                <span class="cov0" title="0">if !isSafeForBooking(schema.Seat{Row: int(seat.Row), Column: int(seat.Column)}, bookedSeat, room.MinDistance) </span><span class="cov0" title="0">{
                        resp = &amp;response.BookingSeats{
                                Base: response.Base{
                                        Message: "Seat is not safe for booking",
                                        Code:    response.CodeError,
                                },
                        }
                        return resp, nil
                }</span>
        }
        <span class="cov0" title="0">dataSeat := make([]*schema.Seat, len(req.Seats))
        for i, seat := range req.Seats </span><span class="cov0" title="0">{
                dataSeat[i] = &amp;schema.Seat{
                        RoomID: room.ID,
                        Row:    int(seat.Row),
                        Column: int(seat.Column),
                }
        }</span>
        <span class="cov0" title="0">err = app.Store.Seat().Create(dataSeat)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">responseSeats := make([]response.Seat, len(req.Seats))
        for i, seat := range dataSeat </span><span class="cov0" title="0">{
                responseSeats[i] = seat.ToResponse()
        }</span>
        <span class="cov0" title="0">return &amp;response.BookingSeats{
                Base: response.Base{
                        Message: "Seat booked successfully",
                        Code:    response.CodeSuccess,
                },
                Seats: responseSeats,
        }, nil</span>
}

func (app *App) GetAvailableSeats(req *request.GetAvailableSeats) (resp *response.GetAvailableSeats, err error) <span class="cov0" title="0">{
        room, err := app.Store.Room().GetByID(req.RoomID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">bookedSeat, err := app.Store.Seat().GetByRoomID(room.ID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">availableSeat := GetAvailableSeat(bookedSeat, room)
        responseAvailableSeat := make([]response.Seat, len(availableSeat))
        for i, seat := range availableSeat </span><span class="cov0" title="0">{
                responseAvailableSeat[i] = seat.ToResponse()
        }</span>
        <span class="cov0" title="0">return &amp;response.GetAvailableSeats{
                Base: response.Base{
                        Message: "Available seats",
                        Code:    response.CodeSuccess,
                },
                AvailableSeats: responseAvailableSeat,
        }, nil</span>
}

func (app *App) CancelSeat(req *request.DeleteSeat) (resp *response.Base, err error) <span class="cov0" title="0">{
        room, err := app.Store.Room().GetByID(req.RoomID)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">dataSeat := make([]*schema.Seat, len(req.Seats))
        for i, seat := range req.Seats </span><span class="cov0" title="0">{
                dataSeat[i] = &amp;schema.Seat{
                        RoomID: room.ID,
                        Row:    int(seat.Row),
                        Column: int(seat.Column),
                }
        }</span>
        <span class="cov0" title="0">err = app.Store.Seat().Delete(room.ID, dataSeat)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;response.Base{
                Message: "Seat canceled successfully",
                Code:    response.CodeSuccess,
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package config

import (
        "fmt"
        "os"

        "github.com/dattranman/simple_cinema/model"

        yaml "gopkg.in/yaml.v2"
)

func Load(path string) (*model.Configuration, error) <span class="cov0" title="0">{
        cfg := &amp;model.Configuration{}
        bytes, err := os.ReadFile(path)
        if err != nil </span><span class="cov0" title="0">{
                return nil, fmt.Errorf("error reading config file , %s", err)
        }</span>

        <span class="cov0" title="0">err = yaml.Unmarshal(bytes, cfg)
        if err != nil </span><span class="cov0" title="0">{
                return nil, fmt.Errorf("unable to decode into struct, %v", err)
        }</span>

        <span class="cov0" title="0">return cfg, nil</span>
}
</pre>
		
		<pre class="file" id="file8" style="display: none">// Package docs Code generated by swaggo/swag. DO NOT EDIT
package docs

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.swagger.io/support",
            "email": "support@swagger.io"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/": {
            "get": {
                "description": "check health",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "check health",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/v1/rooms": {
            "get": {
                "description": "Get all rooms",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "Get all rooms",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            },
            "post": {
                "description": "Create room",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "Create room",
                "parameters": [
                    {
                        "description": "Room",
                        "name": "room",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.CreateRoom"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            }
        },
        "/api/v1/rooms/{id}": {
            "get": {
                "description": "Get room detail",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "Get room detail",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Room ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            }
        },
        "/api/v1/rooms/{id}/available-seats": {
            "get": {
                "description": "Get available seats",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "Get available seats",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Room ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.GetAvailableSeats"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            }
        },
        "/api/v1/rooms/{id}/seats": {
            "post": {
                "description": "Booking seat",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "Booking seat",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Room ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Seats",
                        "name": "seats",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.BookingSeats"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.BookingSeats"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            },
            "delete": {
                "description": "Cancel seat",
                "summary": "Cancel seat",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Room ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Seats",
                        "name": "seats",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/request.DeleteSeat"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.Base"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "request.BookingSeats": {
            "type": "object",
            "properties": {
                "seats": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/request.Seat"
                    }
                }
            }
        },
        "request.CreateRoom": {
            "type": "object",
            "required": [
                "column",
                "row"
            ],
            "properties": {
                "column": {
                    "type": "integer"
                },
                "min_distance": {
                    "type": "integer"
                },
                "row": {
                    "type": "integer"
                }
            }
        },
        "request.DeleteSeat": {
            "type": "object",
            "properties": {
                "seats": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/request.Seat"
                    }
                }
            }
        },
        "request.Seat": {
            "type": "object",
            "properties": {
                "column": {
                    "type": "integer"
                },
                "row": {
                    "type": "integer"
                }
            }
        },
        "response.Base": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "data": {},
                "message": {
                    "type": "string"
                }
            }
        },
        "response.BookingSeats": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "data": {},
                "message": {
                    "type": "string"
                },
                "seats": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.Seat"
                    }
                }
            }
        },
        "response.GetAvailableSeats": {
            "type": "object",
            "properties": {
                "available_seats": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/response.Seat"
                    }
                },
                "code": {
                    "type": "integer"
                },
                "data": {},
                "message": {
                    "type": "string"
                }
            }
        },
        "response.Seat": {
            "type": "object",
            "properties": {
                "column": {
                    "type": "integer"
                },
                "row": {
                    "type": "integer"
                }
            }
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &amp;swag.Spec{
        Version:          "1.0",
        Host:             "",
        BasePath:         "",
        Schemes:          []string{},
        Title:            "Vulcan Cinema API",
        Description:      "This is a API for Vulcan Cinema.",
        InfoInstanceName: "swagger",
        SwaggerTemplate:  docTemplate,
        LeftDelim:        "{{",
        RightDelim:       "}}",
}

func init() <span class="cov0" title="0">{
        swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}</span>
</pre>
		
		<pre class="file" id="file9" style="display: none">package main

import (
        "fmt"
        "net/http"
        "os"

        "github.com/dattranman/simple_cinema/api"
        "github.com/dattranman/simple_cinema/app"
        "github.com/dattranman/simple_cinema/util"

        "github.com/gin-contrib/cors"
        "github.com/gin-gonic/gin"
        "github.com/urfave/cli"
)

func runServer(c *cli.Context) error <span class="cov0" title="0">{
        configFile := c.String("config")
        app, err := app.New(configFile)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">router := gin.New()
        router.Use(gin.Logger())
        router.Use(gin.Recovery())
        router.Use(cors.New(cors.Config{
                AllowOrigins:              []string{"*"},
                AllowMethods:              []string{http.MethodGet, http.MethodHead, http.MethodPut, http.MethodPatch, http.MethodPost, http.MethodDelete, http.MethodOptions},
                AllowCredentials:          true,
                AllowHeaders:              []string{"*"},
                OptionsResponseStatusCode: http.StatusOK,
        }))
        api := api.Init(app, router)
        err = api.Run()
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">return nil</span>
}

// @title           Vulcan Cinema API
// @version         1.0
// @description     This is a API for Vulcan Cinema.
// @termsOfService  http://swagger.io/terms/

// @contact.name   API Support
// @contact.url    http://www.swagger.io/support
// @contact.email  support@swagger.io

// @license.name  Apache 2.0
// @license.url   http://www.apache.org/licenses/LICENSE-2.0.html
func main() <span class="cov0" title="0">{
        app := cli.NewApp()
        app.Name = "st"
        app.Flags = []cli.Flag{
                util.StringFlag("CONFIG", "config", "configuration file path", "config/config.yaml"),
        }
        app.Action = runServer

        if err := app.Run(os.Args); err != nil </span><span class="cov0" title="0">{
                fmt.Fprintln(os.Stderr, err)
                os.Exit(1)
        }</span>
}
</pre>
		
		<pre class="file" id="file10" style="display: none">package request

import (
        "github.com/gin-gonic/gin"
)

type CreateRoom struct {
        Row         uint `json:"row" binding:"required"`
        Column      uint `json:"column" binding:"required"`
        MinDistance uint `json:"min_distance"`
}

func (r *CreateRoom) Bind(c *gin.Context) error <span class="cov0" title="0">{
        if err := c.ShouldBindJSON(r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

type UpdateRoom struct {
        ID     string `uri:"id" binding:"required"`
        Row    uint   `json:"row"`
        Column uint   `json:"column"`
}

func (r *UpdateRoom) Bind(c *gin.Context) error <span class="cov0" title="0">{
        if err := c.ShouldBindUri(r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := c.ShouldBindJSON(r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

type GetRoomDetail struct {
        ID int `uri:"id" binding:"required"`
}

func (r *GetRoomDetail) Bind(c *gin.Context) error <span class="cov0" title="0">{
        if err := c.ShouldBindUri(r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file11" style="display: none">package request

import (
        "errors"
        "fmt"

        "github.com/gin-gonic/gin"
)

type BookingSeats struct {
        Version string `json:"-" uri:"version" binding:"required"`
        RoomID  int    `json:"-" uri:"id" binding:"required"`
        Seats   []Seat `json:"seats"`
}

type Seat struct {
        Row    uint `json:"row"`
        Column uint `json:"column"`
}

func (r *BookingSeats) Bind(c *gin.Context) error <span class="cov0" title="0">{
        err := c.ShouldBindUri(&amp;r)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := c.ShouldBindJSON(&amp;r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if len(r.Seats) == 0 </span><span class="cov0" title="0">{
                return errors.New("seats is required")
        }</span>

        // Check for duplicate seats
        <span class="cov0" title="0">seenSeats := make(map[string]bool)
        for _, seat := range r.Seats </span><span class="cov0" title="0">{
                key := fmt.Sprintf("%d-%d", seat.Row, seat.Column)
                if seenSeats[key] </span><span class="cov0" title="0">{
                        return errors.New("duplicate seats are not allowed")
                }</span>
                <span class="cov0" title="0">seenSeats[key] = true</span>
        }
        <span class="cov0" title="0">return nil</span>
}

type GetAvailableSeats struct {
        Version string `form:"version" uri:"version" binding:"required"`
        RoomID  int    `form:"id" uri:"id" binding:"required"`
}

func (r *GetAvailableSeats) Bind(c *gin.Context) (err error) <span class="cov0" title="0">{
        err = c.ShouldBindUri(r)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

type DeleteSeat struct {
        Version string `json:"-" uri:"version" binding:"required"`
        RoomID  int    `json:"-" uri:"id" binding:"required"`
        Seats   []Seat `json:"seats"`
}

func (r *DeleteSeat) Bind(c *gin.Context) error <span class="cov0" title="0">{
        err := c.ShouldBindUri(&amp;r)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if err := c.ShouldBindJSON(&amp;r); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">if len(r.Seats) == 0 </span><span class="cov0" title="0">{
                return errors.New("seats is required")
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file12" style="display: none">package request

import (
        "strconv"

        "github.com/gin-gonic/gin"
)

type ID struct {
        Version string `uri:"version" binding:"required"`
        IDStr   string `uri:"id" binding:"required"`
        ID      int    `uri:"-"`
}

func (r *ID) Bind(c *gin.Context) (err error) <span class="cov0" title="0">{
        err = c.ShouldBindUri(r)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">r.ID, err = strconv.Atoi(r.IDStr)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file13" style="display: none">package schema

import (
        "github.com/dattranman/simple_cinema/model/response"
)

const (
        RoomTable = "rooms"
)

type Room struct {
        ID          int `json:"id"`
        Row         int `json:"row"`
        Column      int `json:"column"`
        MinDistance int `json:"min_distance"`
}

func (r *Room) TableName() string <span class="cov0" title="0">{
        return RoomTable
}</span>

func (r *Room) ToResponse() *response.Room <span class="cov0" title="0">{
        return &amp;response.Room{
                ID:          r.ID,
                Row:         r.Row,
                Column:      r.Column,
                MinDistance: r.MinDistance,
        }
}</span>
</pre>
		
		<pre class="file" id="file14" style="display: none">package schema

import "github.com/dattranman/simple_cinema/model/response"

const (
        seatTableName = "seats"
)

type Seat struct {
        RoomID int `json:"room_id"`
        Row    int `json:"row"`
        Column int `json:"column"`
}

func (s *Seat) TableName() string <span class="cov0" title="0">{
        return seatTableName
}</span>

func (s *Seat) ToResponse() response.Seat <span class="cov0" title="0">{
        return response.Seat{
                Row:    uint(s.Row),
                Column: uint(s.Column),
        }
}</span>
</pre>
		
		<pre class="file" id="file15" style="display: none">package postgresql

import (
        "github.com/rs/zerolog/log"

        "github.com/dattranman/simple_cinema/model"
        "github.com/dattranman/simple_cinema/store"
        "gorm.io/driver/postgres"
        "gorm.io/gorm"
        "gorm.io/gorm/logger"
)

type PostgresStore struct {
        store.SqlStore
        settings model.SQLSettings
        db       *gorm.DB

        room store.Room
        seat store.Seat
}

func NewPostgres(settings model.SQLSettings) *PostgresStore <span class="cov0" title="0">{
        p := &amp;PostgresStore{
                settings: settings,
        }

        p.initConnection()
        p.room = NewRoomStore(p)
        p.seat = NewSeatStore(p)
        return p
}</span>

func (p *PostgresStore) initConnection() <span class="cov0" title="0">{
        config := gorm.Config{
                QueryFields: true,
                PrepareStmt: true,
        }
        if p.settings.Debug </span><span class="cov0" title="0">{
                config.Logger = logger.Default.LogMode(logger.Info)
        }</span>
        <span class="cov0" title="0">pg := postgres.New(postgres.Config{
                DSN:                  p.settings.URI,
                PreferSimpleProtocol: true,
        })
        db, err := gorm.Open(pg, &amp;config)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Err(err).Msg("Failed to open SQL connection")
        }</span>
        <span class="cov0" title="0">p.db = db</span>
}

func (p *PostgresStore) Room() store.Room <span class="cov0" title="0">{
        return p.room
}</span>

func (p *PostgresStore) Seat() store.Seat <span class="cov0" title="0">{
        return p.seat
}</span>
</pre>
		
		<pre class="file" id="file16" style="display: none">package postgresql

import (
        "github.com/dattranman/simple_cinema/model/schema"
        "github.com/dattranman/simple_cinema/store"
)

type PostgresRoomStore struct {
        postgres *PostgresStore
}

func NewRoomStore(pg *PostgresStore) store.Room <span class="cov0" title="0">{
        return &amp;PostgresRoomStore{
                postgres: pg,
        }
}</span>

func (r *PostgresRoomStore) GetList() (rooms []*schema.Room, total int64, err error) <span class="cov0" title="0">{
        err = r.postgres.db.Find(&amp;rooms).Count(&amp;total).Error
        if err != nil </span><span class="cov0" title="0">{
                return nil, 0, err
        }</span>
        <span class="cov0" title="0">return rooms, total, nil</span>
}

func (r *PostgresRoomStore) Create(room *schema.Room) error <span class="cov0" title="0">{
        return r.postgres.db.Create(room).Error
}</span>

func (r *PostgresRoomStore) Update(room *schema.Room) error <span class="cov0" title="0">{
        return r.postgres.db.Save(room).Error
}</span>

func (r *PostgresRoomStore) Delete(id int) error <span class="cov0" title="0">{
        return r.postgres.db.Delete(&amp;schema.Room{}, "id = ?", id).Error
}</span>

func (r *PostgresRoomStore) GetByID(id int) (*schema.Room, error) <span class="cov0" title="0">{
        var room *schema.Room
        err := r.postgres.db.Where("id = ?", id).First(&amp;room).Error
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return room, nil</span>
}
</pre>
		
		<pre class="file" id="file17" style="display: none">package postgresql

import (
        "github.com/dattranman/simple_cinema/model/schema"
        "github.com/dattranman/simple_cinema/store"
)

type PostgresqlSeatStore struct {
        postgresql *PostgresStore
}

func NewSeatStore(postgresql *PostgresStore) store.Seat <span class="cov0" title="0">{
        return &amp;PostgresqlSeatStore{postgresql: postgresql}
}</span>

func (s *PostgresqlSeatStore) GetByRoomID(roomID int) ([]*schema.Seat, error) <span class="cov0" title="0">{
        var seats []*schema.Seat
        if err := s.postgresql.db.Where("room_id = ?", roomID).Find(&amp;seats).Error; err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return seats, nil</span>
}

func (s *PostgresqlSeatStore) Create(seats []*schema.Seat) error <span class="cov0" title="0">{
        return s.postgresql.db.Create(seats).Error
}</span>

func (s *PostgresqlSeatStore) Delete(roomID int, seats []*schema.Seat) error <span class="cov0" title="0">{
        tx := s.postgresql.db.Begin()
        for _, seat := range seats </span><span class="cov0" title="0">{
                err := tx.Where("room_id = ?", roomID).
                        Where(`"row" = ?`, seat.Row).
                        Where(`"column" = ?`, seat.Column).
                        Delete(&amp;schema.Seat{}).Error
                if err != nil </span><span class="cov0" title="0">{
                        tx.Rollback()
                        return err
                }</span>
        }
        <span class="cov0" title="0">return tx.Commit().Error</span>
}
</pre>
		
		<pre class="file" id="file18" style="display: none">package redis

import (
        "context"

        "github.com/rs/zerolog/log"

        "github.com/dattranman/simple_cinema/model"
        "github.com/dattranman/simple_cinema/store"
        "github.com/redis/go-redis/v9"
)

type RedisCache struct {
        store.CacheStore
        client   *redis.Client
        settings model.CacheSetting

        room store.RoomCache
}

func NewRedis(settings model.CacheSetting) *RedisCache <span class="cov0" title="0">{
        p := &amp;RedisCache{
                settings: settings,
        }

        p.initConnection()
        p.room = NewRoomCache(p)
        return p
}</span>

func (p *RedisCache) initConnection() <span class="cov0" title="0">{
        redisClient := redis.NewClient(&amp;redis.Options{
                Addr:     p.settings.URI,
                Password: p.settings.Password,
                DB:       0,
        })
        _, err := redisClient.Ping(context.Background()).Result()
        if err != nil </span><span class="cov0" title="0">{
                log.Fatal().Err(err).Msg("Failed to open Redis connection")
        }</span>
        <span class="cov0" title="0">p.client = redisClient</span>
}

func (p *RedisCache) Room() store.RoomCache <span class="cov0" title="0">{
        return p.room
}</span>
</pre>
		
		<pre class="file" id="file19" style="display: none">package redis

import (
        "github.com/dattranman/simple_cinema/model/schema"
        "github.com/dattranman/simple_cinema/store"
)

type RedisRoomCache struct {
        redis *RedisCache
}

func NewRoomCache(redis *RedisCache) store.RoomCache <span class="cov0" title="0">{
        return &amp;RedisRoomCache{
                redis: redis,
        }
}</span>

func (r *RedisRoomCache) Get(id string) (*schema.Room, error) <span class="cov0" title="0">{
        return nil, nil
}</span>

func (r *RedisRoomCache) SetBookedSeat(id string, seats []schema.Seat) error <span class="cov0" title="0">{
        return nil
}</span>

func (r *RedisRoomCache) GetBookedSeat(id string) ([]schema.Seat, error) <span class="cov0" title="0">{
        return nil, nil
}</span>

func (r *RedisRoomCache) DeleteBookedSeat(id string, seats []schema.Seat) error <span class="cov0" title="0">{
        return nil
}</span>
</pre>
		
		<pre class="file" id="file20" style="display: none">package util

import "github.com/urfave/cli"

func StringFlag(env, name, usage, value string) cli.StringFlag <span class="cov0" title="0">{
        return cli.StringFlag{
                EnvVar: env,
                Name:   name,
                Usage:  usage,
                Value:  value,
        }
}</span>
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
